<html>
    <head>
        <title>Simple chat o' rama</title>
    </head>
    <body>
        <div>
            <p>
                <label for="messageText">Message</label>
                <input type="text" id="messageText"/>
            </p>
            <p>
                <button id="sendButton">Send</button>
            </p>
        </div>
        <div>
            <ul id="messages">
            </ul>
        </div>        
	<script type="text/javascript"
                src="http://46.137.159.133:1338/socket.io.js"></script>
	
        <script type="text/javascript"
                src="http://code.jquery.com/jquery-1.5.2.js"></script>

        <script type="text/javascript">
	var ws;
	    function connectSocketServer(url) {
    var messageBoard = $('#messages');

    var support = "MozWebSocket" in window ? 'MozWebSocket' : ("WebSocket" in window ? 'WebSocket' : null);

    if (support == null) {
        alert(noSupportMessage);
        messageBoard.append("* " + noSupportMessage + "<br/>");
        return;
    }

    messageBoard.append("* Connecting to server ..<br/>");
    // create a new websocket and connect
    ws = new window[support](url);

    // when data is comming from the server, this metod is called
    ws.onopen = function(event) {  
	  // Send an initial message
	  ws.send('I am the client and I\'m listening!');
	  
	  // Listen for messages	  
	  
	  // To close the socket....
	  //socket.close()
	  
	};
	
	ws.onmessage = function(event) {
	    messageBoard.append('Client received a message:' + event.data);
	  };
	  
	  // Listen for socket closes
	  ws.onclose = function(event) {
	    messageBoard.append('Client notified socket has closed:' + event);
	  };
}
	
            $(document).ready(function() {
		connectSocketServer("ws://46.137.159.133:1338/force");          
		$('#sendButton').click(function(){
		ws.send($('#messageText').value);
		});
                
            });
        </script>
    </body>
</html>